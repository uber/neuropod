
#
# DO NOT MANUALLY EDIT THIS FILE
# AUTOGENERATED BY build/ci_matrix.py
#

# Run on 16.04 for linux builds
dist: xenial
language: minimal

cache:
  directories:
    - /tmp/bazel_cache

# Define a build matrix
matrix:
  include:
    # A single linux build to make sure that the build scripts work correctly outside of docker
    - os: linux
    - os: osx
      osx_image: xcode12
      env: NEUROPOD_TENSORFLOW_VERSION=1.12.0 NEUROPOD_TORCH_VERSION=1.1.0 NEUROPOD_PYTHON_VERSION=2.7

    - os: osx
      osx_image: xcode12
      env: NEUROPOD_TENSORFLOW_VERSION=1.13.1 NEUROPOD_TORCH_VERSION=1.2.0 NEUROPOD_PYTHON_VERSION=3.5

    - os: osx
      osx_image: xcode12
      env: NEUROPOD_TENSORFLOW_VERSION=1.14.0 NEUROPOD_TORCH_VERSION=1.3.0 NEUROPOD_PYTHON_VERSION=3.6

    - os: osx
      osx_image: xcode12
      env: NEUROPOD_TENSORFLOW_VERSION=1.15.0 NEUROPOD_TORCH_VERSION=1.4.0 NEUROPOD_PYTHON_VERSION=3.7

    - os: osx
      osx_image: xcode12
      env: NEUROPOD_TENSORFLOW_VERSION=2.3.0 NEUROPOD_TORCH_VERSION=1.5.0 NEUROPOD_PYTHON_VERSION=3.8



script:
  # Travis changes whether the shell is a TTY or not depending on if there are secret env variables set.
  # Travis also does not set these variables for PRs from outside the repo (e.g. from forks) for security
  # reasons (https://docs.travis-ci.com/user/pull-requests/#pull-requests-and-security-restrictions).
  # This leads to different behavior depending on where the PR came from.
  # To get around this, we always run in a non-interactive shell.
  - set -o pipefail
  - ./build/ci/travis_build.sh < /dev/null | cat
