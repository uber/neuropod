
#
# DO NOT MANUALLY EDIT THIS FILE
# AUTOGENERATED BY build/ci_matrix.py
#

version: '2.3'
services:
  test-base:
    build:
      context: .
      dockerfile: build/neuropods.dockerfile
      target: neuropod-build
    privileged: true

  test-gpu:
    extends: test-base
    build:
      args:
        NEUROPODS_IS_GPU: "true"
    runtime: nvidia

  test-cpu-variant-tf-1.11.0-torch-1.2.0.dev20190601-py2.7:
    extends: test-base
    build:
      args:
        NEUROPODS_TENSORFLOW_VERSION: 1.11.0
        NEUROPODS_TORCH_VERSION: 1.2.0.dev20190601
        NEUROPODS_PYTHON_BINARY: python

  test-cpu-variant-tf-1.12.0-torch-1.2.0.dev20190717-py2.7:
    extends: test-base
    build:
      args:
        NEUROPODS_TENSORFLOW_VERSION: 1.12.0
        NEUROPODS_TORCH_VERSION: 1.2.0.dev20190717
        NEUROPODS_PYTHON_BINARY: python

  test-cpu-variant-tf-1.13.1-torch-1.1.0-py2.7:
    extends: test-base
    build:
      args:
        NEUROPODS_TENSORFLOW_VERSION: 1.13.1
        NEUROPODS_TORCH_VERSION: 1.1.0
        NEUROPODS_PYTHON_BINARY: python

  test-cpu-variant-tf-1.11.0-torch-1.2.0.dev20190601-py3:
    extends: test-base
    build:
      args:
        NEUROPODS_TENSORFLOW_VERSION: 1.11.0
        NEUROPODS_TORCH_VERSION: 1.2.0.dev20190601
        NEUROPODS_PYTHON_BINARY: python3

  test-cpu-variant-tf-1.12.0-torch-1.2.0.dev20190717-py3:
    extends: test-base
    build:
      args:
        NEUROPODS_TENSORFLOW_VERSION: 1.12.0
        NEUROPODS_TORCH_VERSION: 1.2.0.dev20190717
        NEUROPODS_PYTHON_BINARY: python3

  test-cpu-variant-tf-1.13.1-torch-1.1.0-py3:
    extends: test-base
    build:
      args:
        NEUROPODS_TENSORFLOW_VERSION: 1.13.1
        NEUROPODS_TORCH_VERSION: 1.1.0
        NEUROPODS_PYTHON_BINARY: python3

  test-gpu-variant-tf-1.11.0-torch-1.2.0.dev20190601-py2.7:
    extends: test-gpu
    build:
      args:
        NEUROPODS_CUDA_VERSION: 9.0
        NEUROPODS_TENSORFLOW_VERSION: 1.11.0
        NEUROPODS_TORCH_VERSION: 1.2.0.dev20190601
        NEUROPODS_PYTHON_BINARY: python

  test-gpu-variant-tf-1.12.0-torch-1.2.0.dev20190717-py2.7:
    extends: test-gpu
    build:
      args:
        NEUROPODS_CUDA_VERSION: 9.0
        NEUROPODS_TENSORFLOW_VERSION: 1.12.0
        NEUROPODS_TORCH_VERSION: 1.2.0.dev20190717
        NEUROPODS_PYTHON_BINARY: python

  test-gpu-variant-tf-1.13.1-torch-1.1.0-py2.7:
    extends: test-gpu
    build:
      args:
        NEUROPODS_CUDA_VERSION: 10.0
        NEUROPODS_TENSORFLOW_VERSION: 1.13.1
        NEUROPODS_TORCH_VERSION: 1.1.0
        NEUROPODS_PYTHON_BINARY: python

  test-gpu-variant-tf-1.11.0-torch-1.2.0.dev20190601-py3:
    extends: test-gpu
    build:
      args:
        NEUROPODS_CUDA_VERSION: 9.0
        NEUROPODS_TENSORFLOW_VERSION: 1.11.0
        NEUROPODS_TORCH_VERSION: 1.2.0.dev20190601
        NEUROPODS_PYTHON_BINARY: python3

  test-gpu-variant-tf-1.12.0-torch-1.2.0.dev20190717-py3:
    extends: test-gpu
    build:
      args:
        NEUROPODS_CUDA_VERSION: 9.0
        NEUROPODS_TENSORFLOW_VERSION: 1.12.0
        NEUROPODS_TORCH_VERSION: 1.2.0.dev20190717
        NEUROPODS_PYTHON_BINARY: python3

  test-gpu-variant-tf-1.13.1-torch-1.1.0-py3:
    extends: test-gpu
    build:
      args:
        NEUROPODS_CUDA_VERSION: 10.0
        NEUROPODS_TENSORFLOW_VERSION: 1.13.1
        NEUROPODS_TORCH_VERSION: 1.1.0
        NEUROPODS_PYTHON_BINARY: python3


