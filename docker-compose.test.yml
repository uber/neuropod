
#
# DO NOT MANUALLY EDIT THIS FILE
# AUTOGENERATED BY build/ci_matrix.py
#

version: '2.3'
services:
  test-base:
    build:
      context: .
      dockerfile: build/neuropod.dockerfile
      target: neuropod-base

  test-gpu:
    extends: test-base
    build:
      args:
        NEUROPOD_IS_GPU: "true"
    runtime: nvidia

  test-cpu-variant-tf-2_5_0-torch-1_7_1-py3_9:
    extends: test-base
    build:
      args:
        NEUROPOD_TENSORFLOW_VERSION: 2.5.0
        NEUROPOD_TORCH_VERSION: 1.7.1
        NEUROPOD_PYTHON_VERSION: 3.9

  test-cpu-variant-tf-2_6_2-torch-1_7_1-py3_9:
    extends: test-base
    build:
      args:
        NEUROPOD_TENSORFLOW_VERSION: 2.6.2
        NEUROPOD_TORCH_VERSION: 1.7.1
        NEUROPOD_PYTHON_VERSION: 3.9

  test-gpu-variant-tf-2_5_0-torch-1_7_1-py3_9:
    extends: test-gpu
    build:
      args:
        NEUROPOD_CUDA_VERSION: 11.2.1
        NEUROPOD_CUDNN_VERSION: 8
        NEUROPOD_TENSORFLOW_VERSION: 2.5.0
        NEUROPOD_TORCH_VERSION: 1.7.1
        NEUROPOD_PYTHON_VERSION: 3.9

  test-gpu-variant-tf-2_6_2-torch-1_7_1-py3_9:
    extends: test-gpu
    build:
      args:
        NEUROPOD_CUDA_VERSION: 11.2.1
        NEUROPOD_CUDNN_VERSION: 8
        NEUROPOD_TENSORFLOW_VERSION: 2.6.2
        NEUROPOD_TORCH_VERSION: 1.7.1
        NEUROPOD_PYTHON_VERSION: 3.9


